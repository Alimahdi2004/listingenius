<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ListinGenius â€“ Create Your Listing Video</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300;1,9..40,400&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg-dark: #0f1923;
  --bg-dark-2: #152232;
  --bg-dark-card: #1a2a3a;
  --bg-warm: #faf6f1;
  --accent: #d4654a;
  --accent-light: #e8836b;
  --accent-glow: rgba(212, 101, 74, 0.2);
  --cyan: #4ac1c9;
  --text-dark: #1a1a2e;
  --text-dark-secondary: #4a4a60;
  --text-light: #f0ece6;
  --text-light-secondary: #a0b4c8;
  --border-dark: rgba(255,255,255,0.07);
  --border-light: rgba(26,26,46,0.08);
  --font-display: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-body: 'DM Sans', sans-serif;
  --success: #22c55e;
  --warning: #eab308;
}

html { scroll-behavior: smooth; }

body {
  font-family: var(--font-body);
  background: var(--bg-dark);
  color: var(--text-light);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}

/* â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â• */
.app-header {
  background: var(--bg-dark-2);
  border-bottom: 1px solid var(--border-dark);
  padding: 16px 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 100;
}

.logo {
  font-family: var(--font-main);
  font-weight: 800;
  font-size: 1.3rem;
  color: var(--text-light);
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 10px;
}

.logo-mark {
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, var(--accent), var(--accent-light));
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  color: white;
  font-weight: 800;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 20px;
}

.credits-badge {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-dark-card);
  padding: 8px 16px;
  border-radius: 50px;
  border: 1px solid var(--border-dark);
}

.credits-icon { font-size: 1.1rem; }

.credits-count {
  font-family: var(--font-main);
  font-weight: 700;
  color: var(--accent-light);
}

.credits-label {
  font-size: 0.8rem;
  color: var(--text-light-secondary);
}

.btn-buy-credits {
  background: linear-gradient(135deg, var(--accent), var(--accent-light));
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 50px;
  font-family: var(--font-main);
  font-weight: 600;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.3s;
}

.btn-buy-credits:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px var(--accent-glow);
}

.user-menu {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  padding: 6px 12px;
  border-radius: 50px;
  transition: background 0.3s;
}

.user-menu:hover { background: var(--bg-dark-card); }

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--cyan), var(--accent));
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.8rem;
}

/* â•â•â•â•â•â•â•â•â•â•â• MAIN LAYOUT â•â•â•â•â•â•â•â•â•â•â• */
.app-layout {
  display: grid;
  grid-template-columns: 280px 1fr;
  min-height: calc(100vh - 65px);
}

/* â•â•â•â•â•â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â•â• */
.sidebar {
  background: var(--bg-dark-2);
  border-right: 1px solid var(--border-dark);
  padding: 24px 16px;
}

.sidebar-section {
  margin-bottom: 32px;
}

.sidebar-title {
  font-family: var(--font-main);
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  color: var(--text-light-secondary);
  margin-bottom: 12px;
  padding: 0 12px;
}

.sidebar-nav {
  list-style: none;
}

.sidebar-nav li a {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  color: var(--text-light-secondary);
  text-decoration: none;
  border-radius: 10px;
  font-size: 0.9rem;
  transition: all 0.3s;
}

.sidebar-nav li a:hover {
  background: var(--bg-dark-card);
  color: var(--text-light);
}

.sidebar-nav li a.active {
  background: var(--accent);
  color: white;
}

.sidebar-nav li a .icon { font-size: 1.1rem; }

/* â•â•â•â•â•â•â•â•â•â•â• MAIN CONTENT â•â•â•â•â•â•â•â•â•â•â• */
.main-content {
  padding: 32px;
  overflow-y: auto;
}

.page-header {
  margin-bottom: 32px;
}

.page-title {
  font-family: var(--font-main);
  font-size: 1.8rem;
  font-weight: 800;
  margin-bottom: 8px;
}

.page-subtitle {
  color: var(--text-light-secondary);
  font-size: 0.95rem;
}

/* â•â•â•â•â•â•â•â•â•â•â• STEPPER â•â•â•â•â•â•â•â•â•â•â• */
.stepper {
  display: flex;
  gap: 8px;
  margin-bottom: 40px;
}

.step-indicator {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
  background: var(--bg-dark-card);
  border: 1px solid var(--border-dark);
  border-radius: 12px;
  flex: 1;
  opacity: 0.5;
  transition: all 0.3s;
}

.step-indicator.active {
  opacity: 1;
  border-color: var(--accent);
  background: rgba(212, 101, 74, 0.1);
}

.step-indicator.completed {
  opacity: 1;
  border-color: var(--success);
}

.step-number {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--bg-dark);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-main);
  font-weight: 700;
  font-size: 0.8rem;
}

.step-indicator.active .step-number {
  background: var(--accent);
}

.step-indicator.completed .step-number {
  background: var(--success);
}

.step-info h4 {
  font-family: var(--font-main);
  font-size: 0.85rem;
  font-weight: 600;
}

.step-info p {
  font-size: 0.72rem;
  color: var(--text-light-secondary);
}

/* â•â•â•â•â•â•â•â•â•â•â• PANELS â•â•â•â•â•â•â•â•â•â•â• */
.panel {
  display: none;
}

.panel.active {
  display: block;
}

/* â•â•â•â•â•â•â•â•â•â•â• UPLOAD PANEL â•â•â•â•â•â•â•â•â•â•â• */
.upload-zone {
  border: 2px dashed var(--border-dark);
  border-radius: 20px;
  padding: 60px 40px;
  text-align: center;
  background: var(--bg-dark-card);
  transition: all 0.3s;
  cursor: pointer;
}

.upload-zone:hover, .upload-zone.dragover {
  border-color: var(--accent);
  background: rgba(212, 101, 74, 0.05);
}

.upload-icon {
  font-size: 3rem;
  margin-bottom: 16px;
}

.upload-title {
  font-family: var(--font-main);
  font-size: 1.2rem;
  font-weight: 700;
  margin-bottom: 8px;
}

.upload-subtitle {
  color: var(--text-light-secondary);
  font-size: 0.9rem;
  margin-bottom: 20px;
}

.upload-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: var(--accent);
  color: white;
  border: none;
  padding: 12px 28px;
  border-radius: 50px;
  font-family: var(--font-main);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.upload-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px var(--accent-glow);
}

.upload-specs {
  margin-top: 24px;
  display: flex;
  justify-content: center;
  gap: 24px;
  font-size: 0.8rem;
  color: var(--text-light-secondary);
}

/* Photo Grid */
.photos-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 16px;
  margin-top: 24px;
}

.photo-item {
  position: relative;
  aspect-ratio: 4/3;
  border-radius: 12px;
  overflow: hidden;
  background: var(--bg-dark-card);
  border: 1px solid var(--border-dark);
}

.photo-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.photo-remove {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: rgba(0,0,0,0.7);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s;
}

.photo-item:hover .photo-remove { opacity: 1; }

.photo-order {
  position: absolute;
  bottom: 8px;
  left: 8px;
  background: var(--accent);
  color: white;
  font-size: 0.7rem;
  font-weight: 700;
  padding: 4px 8px;
  border-radius: 20px;
}

/* â•â•â•â•â•â•â•â•â•â•â• DETAILS PANEL â•â•â•â•â•â•â•â•â•â•â• */
.form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form-group.full-width {
  grid-column: span 2;
}

.form-label {
  font-family: var(--font-main);
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-light);
}

.form-input, .form-select, .form-textarea {
  background: var(--bg-dark-card);
  border: 1px solid var(--border-dark);
  border-radius: 10px;
  padding: 14px 16px;
  color: var(--text-light);
  font-family: var(--font-body);
  font-size: 0.95rem;
  transition: all 0.3s;
}

.form-input:focus, .form-select:focus, .form-textarea:focus {
  outline: none;
  border-color: var(--accent);
}

.form-textarea {
  min-height: 100px;
  resize: vertical;
}

/* Style Selector */
.style-selector {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 12px;
  margin-top: 8px;
}

.style-option {
  background: var(--bg-dark-card);
  border: 2px solid var(--border-dark);
  border-radius: 12px;
  padding: 16px 12px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
}

.style-option:hover {
  border-color: var(--accent);
}

.style-option.selected {
  border-color: var(--accent);
  background: rgba(212, 101, 74, 0.1);
}

.style-icon { font-size: 1.5rem; margin-bottom: 8px; }

.style-name {
  font-family: var(--font-main);
  font-size: 0.8rem;
  font-weight: 600;
}

/* â•â•â•â•â•â•â•â•â•â•â• GENERATE PANEL â•â•â•â•â•â•â•â•â•â•â• */
.generate-summary {
  background: var(--bg-dark-card);
  border: 1px solid var(--border-dark);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.summary-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.summary-title {
  font-family: var(--font-main);
  font-size: 1.1rem;
  font-weight: 700;
}

.summary-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
}

.summary-item {
  text-align: center;
  padding: 16px;
  background: var(--bg-dark);
  border-radius: 12px;
}

.summary-value {
  font-family: var(--font-main);
  font-size: 1.5rem;
  font-weight: 800;
  color: var(--accent-light);
}

.summary-label {
  font-size: 0.75rem;
  color: var(--text-light-secondary);
  margin-top: 4px;
}

/* Cost Breakdown */
.cost-breakdown {
  background: var(--bg-dark-card);
  border: 1px solid var(--border-dark);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.cost-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid var(--border-dark);
}

.cost-row:last-child { border-bottom: none; }

.cost-row.total {
  font-family: var(--font-main);
  font-weight: 700;
  font-size: 1.1rem;
  padding-top: 16px;
  margin-top: 8px;
  border-top: 2px solid var(--accent);
  border-bottom: none;
}

.cost-row.total .cost-value { color: var(--accent-light); }

/* Generate Button */
.generate-actions {
  text-align: center;
}

.btn-generate {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  background: linear-gradient(135deg, var(--accent), var(--accent-light));
  color: white;
  border: none;
  padding: 18px 48px;
  border-radius: 60px;
  font-family: var(--font-main);
  font-weight: 700;
  font-size: 1.1rem;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 4px 20px var(--accent-glow);
}

.btn-generate:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 40px var(--accent-glow);
}

.btn-generate:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* â•â•â•â•â•â•â•â•â•â•â• RESULTS PANEL â•â•â•â•â•â•â•â•â•â•â• */
.results-section {
  margin-bottom: 32px;
}

.results-title {
  font-family: var(--font-main);
  font-size: 1.2rem;
  font-weight: 700;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.video-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
}

.video-card {
  background: var(--bg-dark-card);
  border: 1px solid var(--border-dark);
  border-radius: 16px;
  overflow: hidden;
}

.video-preview {
  aspect-ratio: 9/16;
  background: var(--bg-dark);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.video-preview.landscape { aspect-ratio: 16/9; }
.video-preview.square { aspect-ratio: 1/1; }

.video-preview video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.video-info {
  padding: 16px;
}

.video-format {
  font-family: var(--font-main);
  font-size: 0.85rem;
  font-weight: 600;
  margin-bottom: 4px;
}

.video-platform {
  font-size: 0.75rem;
  color: var(--text-light-secondary);
}

.video-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.btn-download, .btn-copy {
  flex: 1;
  padding: 10px;
  border-radius: 8px;
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  border: none;
}

.btn-download {
  background: var(--accent);
  color: white;
}

.btn-copy {
  background: var(--bg-dark);
  color: var(--text-light);
  border: 1px solid var(--border-dark);
}

/* Description & Social Cards */
.content-card {
  background: var(--bg-dark-card);
  border: 1px solid var(--border-dark);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 16px;
}

.content-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.content-card-title {
  font-family: var(--font-main);
  font-size: 0.95rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.content-text {
  color: var(--text-light-secondary);
  font-size: 0.9rem;
  line-height: 1.7;
  white-space: pre-wrap;
}

/* Progress */
.progress-container {
  background: var(--bg-dark-card);
  border: 1px solid var(--border-dark);
  border-radius: 16px;
  padding: 40px;
  text-align: center;
}

.progress-spinner {
  width: 60px;
  height: 60px;
  border: 4px solid var(--border-dark);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 20px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.progress-title {
  font-family: var(--font-main);
  font-size: 1.2rem;
  font-weight: 700;
  margin-bottom: 8px;
}

.progress-status {
  color: var(--text-light-secondary);
  font-size: 0.9rem;
  margin-bottom: 20px;
}

.progress-bar {
  height: 8px;
  background: var(--bg-dark);
  border-radius: 10px;
  overflow: hidden;
  max-width: 400px;
  margin: 0 auto;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--cyan));
  border-radius: 10px;
  transition: width 0.5s ease;
}

/* â•â•â•â•â•â•â•â•â•â•â• NAV BUTTONS â•â•â•â•â•â•â•â•â•â•â• */
.panel-nav {
  display: flex;
  justify-content: space-between;
  margin-top: 32px;
  padding-top: 24px;
  border-top: 1px solid var(--border-dark);
}

.btn-nav {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 14px 28px;
  border-radius: 50px;
  font-family: var(--font-main);
  font-weight: 600;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.3s;
  border: none;
}

.btn-back {
  background: var(--bg-dark-card);
  color: var(--text-light);
  border: 1px solid var(--border-dark);
}

.btn-next {
  background: var(--accent);
  color: white;
}

.btn-next:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px var(--accent-glow);
}

.btn-next:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* â•â•â•â•â•â•â•â•â•â•â• RESPONSIVE â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 1024px) {
  .app-layout { grid-template-columns: 1fr; }
  .sidebar { display: none; }
  .form-grid { grid-template-columns: 1fr; }
  .form-group.full-width { grid-column: span 1; }
  .style-selector { grid-template-columns: repeat(3, 1fr); }
  .summary-grid { grid-template-columns: repeat(2, 1fr); }
  .video-grid { grid-template-columns: 1fr; }
}

@media (max-width: 768px) {
  .app-header { padding: 12px 16px; }
  .main-content { padding: 20px 16px; }
  .stepper { flex-direction: column; }
  .style-selector { grid-template-columns: repeat(2, 1fr); }
  .header-right { gap: 12px; }
  .credits-label { display: none; }
}
</style>
</head>
<body>

<!-- HEADER -->
<header class="app-header">
  <a href="index.html" class="logo">
    <div class="logo-mark">L</div>
    ListinGenius
  </a>
  <div class="header-right">
    <div class="credits-badge">
      <span class="credits-icon">âš¡</span>
      <span class="credits-count" id="creditsCount">3</span>
      <span class="credits-label">credits</span>
    </div>
    <button class="btn-buy-credits" onclick="showBuyCredits()">Buy Credits</button>
    <div class="user-menu">
      <div class="user-avatar">JD</div>
    </div>
  </div>
</header>

<!-- MAIN LAYOUT -->
<div class="app-layout">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-section">
      <div class="sidebar-title">Create</div>
      <ul class="sidebar-nav">
        <li><a href="#" class="active"><span class="icon">âœ¨</span> New Listing Video</a></li>
      </ul>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-title">Library</div>
      <ul class="sidebar-nav">
        <li><a href="#"><span class="icon">ğŸ“</span> My Videos</a></li>
        <li><a href="#"><span class="icon">ğŸ“</span> Descriptions</a></li>
        <li><a href="#"><span class="icon">ğŸ“±</span> Social Posts</a></li>
      </ul>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-title">Account</div>
      <ul class="sidebar-nav">
        <li><a href="#"><span class="icon">âš™ï¸</span> Settings</a></li>
        <li><a href="#"><span class="icon">ğŸ’³</span> Billing</a></li>
        <li><a href="#"><span class="icon">â“</span> Help</a></li>
      </ul>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="main-content">
    <div class="page-header">
      <h1 class="page-title">Create Listing Video</h1>
      <p class="page-subtitle">Upload photos, add details, and let AI create your marketing package</p>
    </div>

    <!-- STEPPER -->
    <div class="stepper">
      <div class="step-indicator active" data-step="1">
        <div class="step-number">1</div>
        <div class="step-info">
          <h4>Upload Photos</h4>
          <p>Add listing images</p>
        </div>
      </div>
      <div class="step-indicator" data-step="2">
        <div class="step-number">2</div>
        <div class="step-info">
          <h4>Property Details</h4>
          <p>Enter listing info</p>
        </div>
      </div>
      <div class="step-indicator" data-step="3">
        <div class="step-number">3</div>
        <div class="step-info">
          <h4>Generate</h4>
          <p>Create your videos</p>
        </div>
      </div>
    </div>

    <!-- PANEL 1: UPLOAD -->
    <div class="panel active" id="panel1">
      <div class="upload-zone" id="uploadZone">
        <div class="upload-icon">ğŸ“¸</div>
        <h3 class="upload-title">Drop your listing photos here</h3>
        <p class="upload-subtitle">or click to browse files</p>
        <button class="upload-btn">
          <span>Choose Photos</span>
        </button>
        <div class="upload-specs">
          <span>ğŸ“· JPG, PNG, WebP</span>
          <span>ğŸ“ Up to 20 photos</span>
          <span>ğŸ’¾ Max 10MB each</span>
        </div>
      </div>
      <input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
      
      <div class="photos-grid" id="photosGrid"></div>

      <div class="panel-nav">
        <div></div>
        <button class="btn-nav btn-next" id="btnToStep2" disabled onclick="goToStep(2)">
          Continue to Details â†’
        </button>
      </div>
    </div>

    <!-- PANEL 2: DETAILS -->
    <div class="panel" id="panel2">
      <div class="form-grid">
        <div class="form-group full-width">
          <label class="form-label">Property Address *</label>
          <input type="text" class="form-input" id="address" placeholder="123 Main Street, City, ST 12345">
        </div>
        <div class="form-group">
          <label class="form-label">Listing Price *</label>
          <input type="text" class="form-input" id="price" placeholder="$485,000">
        </div>
        <div class="form-group">
          <label class="form-label">Property Type</label>
          <select class="form-select" id="propertyType">
            <option>Single Family Home</option>
            <option>Condo / Apartment</option>
            <option>Townhouse</option>
            <option>Multi-Family</option>
            <option>Land / Lot</option>
            <option>Commercial</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Bedrooms</label>
          <input type="number" class="form-input" id="bedrooms" value="4" min="0">
        </div>
        <div class="form-group">
          <label class="form-label">Bathrooms</label>
          <input type="number" class="form-input" id="bathrooms" value="3" min="0" step="0.5">
        </div>
        <div class="form-group">
          <label class="form-label">Square Feet</label>
          <input type="number" class="form-input" id="sqft" placeholder="2,450">
        </div>
        <div class="form-group">
          <label class="form-label">Year Built</label>
          <input type="number" class="form-input" id="yearBuilt" placeholder="2015">
        </div>
        <div class="form-group full-width">
          <label class="form-label">Key Features (comma separated)</label>
          <input type="text" class="form-input" id="features" placeholder="Pool, Updated Kitchen, Hardwood Floors, Smart Home">
        </div>
        <div class="form-group full-width">
          <label class="form-label">Video Style</label>
          <div class="style-selector">
            <div class="style-option selected" data-style="cinematic">
              <div class="style-icon">ğŸ¬</div>
              <div class="style-name">Cinematic</div>
            </div>
            <div class="style-option" data-style="luxury">
              <div class="style-icon">ğŸ’</div>
              <div class="style-name">Luxury</div>
            </div>
            <div class="style-option" data-style="modern">
              <div class="style-icon">ğŸ¢</div>
              <div class="style-name">Modern</div>
            </div>
            <div class="style-option" data-style="cozy">
              <div class="style-icon">ğŸ¡</div>
              <div class="style-name">Cozy</div>
            </div>
            <div class="style-option" data-style="dramatic">
              <div class="style-icon">ğŸŒŸ</div>
              <div class="style-name">Dramatic</div>
            </div>
          </div>
        </div>
        <div class="form-group full-width">
          <label class="form-label">Director's Notes <span style="font-weight: 400; color: var(--text-light-secondary);">(optional)</span></label>
          <textarea class="form-textarea" id="directorNotes" placeholder="Add creative direction for your video...

Examples:
â€¢ Focus on the kitchen's natural lighting
â€¢ Emphasize the backyard pool area  
â€¢ Slow, elegant movements through the living room
â€¢ Highlight the mountain views from the balcony
â€¢ Create a warm, inviting feeling for families"></textarea>
          <div style="margin-top: 8px; font-size: 0.75rem; color: var(--text-light-secondary);">
            ğŸ’¡ These notes help our AI understand your vision and create the perfect video for your listing.
          </div>
        </div>
      </div>

      <div class="panel-nav">
        <button class="btn-nav btn-back" onclick="goToStep(1)">â† Back</button>
        <button class="btn-nav btn-next" onclick="goToStep(3)">Review & Generate â†’</button>
      </div>
    </div>

    <!-- PANEL 3: GENERATE -->
    <div class="panel" id="panel3">
      <div class="generate-summary">
        <div class="summary-header">
          <h3 class="summary-title">ğŸ“‹ Summary</h3>
        </div>
        <div class="summary-grid">
          <div class="summary-item">
            <div class="summary-value" id="summaryPhotos">0</div>
            <div class="summary-label">Photos</div>
          </div>
          <div class="summary-item">
            <div class="summary-value" id="summaryVideos">0</div>
            <div class="summary-label">Videos</div>
          </div>
          <div class="summary-item">
            <div class="summary-value" id="summaryFormats">3</div>
            <div class="summary-label">Formats</div>
          </div>
          <div class="summary-item">
            <div class="summary-value" id="summaryStyle">Cinematic</div>
            <div class="summary-label">Style</div>
          </div>
        </div>
      </div>

      <div class="cost-breakdown">
        <h3 class="summary-title" style="margin-bottom: 16px;">ğŸ’° Credit Cost</h3>
        <div class="cost-row">
          <span>Video Generation (<span id="costVideos">0</span> videos)</span>
          <span id="costVideoCredits">0 credits</span>
        </div>
        <div class="cost-row">
          <span>AI Description</span>
          <span>Included</span>
        </div>
        <div class="cost-row">
          <span>Social Media Posts (5 platforms)</span>
          <span>Included</span>
        </div>
        <div class="cost-row total">
          <span>Total</span>
          <span class="cost-value" id="costTotal">1 credit</span>
        </div>
      </div>

      <div class="generate-actions">
        <button class="btn-generate" id="btnGenerate" onclick="startGeneration()">
          <span>âš¡</span>
          Generate Everything
        </button>
        <p style="margin-top: 16px; color: var(--text-light-secondary); font-size: 0.85rem;">
          You have <strong id="creditsRemaining">3</strong> credits remaining
        </p>
      </div>

      <div class="panel-nav">
        <button class="btn-nav btn-back" onclick="goToStep(2)">â† Back to Details</button>
        <div></div>
      </div>
    </div>

    <!-- PANEL 4: PROCESSING -->
    <div class="panel" id="panel4">
      <div class="progress-container">
        <div class="progress-spinner"></div>
        <h3 class="progress-title">Creating Your Marketing Package...</h3>
        <p class="progress-status" id="progressStatus">Uploading photos...</p>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
      </div>
    </div>

    <!-- PANEL 5: RESULTS -->
    <div class="panel" id="panel5">
      <div class="results-section">
        <h3 class="results-title">ğŸ¬ Your Videos</h3>
        <div class="video-grid" id="videoResults">
          <!-- Videos will be inserted here -->
        </div>
      </div>

      <div class="results-section">
        <h3 class="results-title">âœï¸ Property Description</h3>
        <div class="content-card">
          <div class="content-card-header">
            <span class="content-card-title">ğŸ“ MLS Description</span>
            <button class="btn-copy" onclick="copyText('descriptionText')">Copy</button>
          </div>
          <p class="content-text" id="descriptionText">Your AI-generated description will appear here...</p>
        </div>
      </div>

      <div class="results-section">
        <h3 class="results-title">ğŸ“± Social Media Posts</h3>
        <div id="socialPosts">
          <!-- Social posts will be inserted here -->
        </div>
      </div>

      <div class="panel-nav">
        <button class="btn-nav btn-back" onclick="startNewListing()">âœ¨ Create Another Listing</button>
        <button class="btn-nav btn-next" onclick="downloadAll()">ğŸ“¥ Download All</button>
      </div>
    </div>

  </main>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â• STATE â•â•â•â•â•â•â•â•â•â•â•
let currentStep = 1;
let uploadedPhotos = [];
let selectedStyle = 'cinematic';
let userCredits = 3;

// â•â•â•â•â•â•â•â•â•â•â• UPLOAD HANDLING â•â•â•â•â•â•â•â•â•â•â•
const uploadZone = document.getElementById('uploadZone');
const fileInput = document.getElementById('fileInput');
const photosGrid = document.getElementById('photosGrid');

uploadZone.addEventListener('click', () => fileInput.click());

uploadZone.addEventListener('dragover', (e) => {
  e.preventDefault();
  uploadZone.classList.add('dragover');
});

uploadZone.addEventListener('dragleave', () => {
  uploadZone.classList.remove('dragover');
});

uploadZone.addEventListener('drop', (e) => {
  e.preventDefault();
  uploadZone.classList.remove('dragover');
  handleFiles(e.dataTransfer.files);
});

fileInput.addEventListener('change', (e) => {
  handleFiles(e.target.files);
});

function handleFiles(files) {
  for (let file of files) {
    if (uploadedPhotos.length >= 20) break;
    if (!file.type.startsWith('image/')) continue;
    
    const reader = new FileReader();
    reader.onload = (e) => {
      uploadedPhotos.push({
        file: file,
        dataUrl: e.target.result
      });
      renderPhotos();
      updateButtonState();
    };
    reader.readAsDataURL(file);
  }
}

function renderPhotos() {
  photosGrid.innerHTML = uploadedPhotos.map((photo, index) => `
    <div class="photo-item">
      <img src="${photo.dataUrl}" alt="Photo ${index + 1}">
      <button class="photo-remove" onclick="removePhoto(${index})">Ã—</button>
      <span class="photo-order">${index + 1}</span>
    </div>
  `).join('');
}

function removePhoto(index) {
  uploadedPhotos.splice(index, 1);
  renderPhotos();
  updateButtonState();
}

function updateButtonState() {
  document.getElementById('btnToStep2').disabled = uploadedPhotos.length === 0;
}

// â•â•â•â•â•â•â•â•â•â•â• STYLE SELECTOR â•â•â•â•â•â•â•â•â•â•â•
document.querySelectorAll('.style-option').forEach(option => {
  option.addEventListener('click', () => {
    document.querySelectorAll('.style-option').forEach(o => o.classList.remove('selected'));
    option.classList.add('selected');
    selectedStyle = option.dataset.style;
  });
});

// â•â•â•â•â•â•â•â•â•â•â• NAVIGATION â•â•â•â•â•â•â•â•â•â•â•
function goToStep(step) {
  currentStep = step;
  
  // Update stepper
  document.querySelectorAll('.step-indicator').forEach((ind, i) => {
    ind.classList.remove('active', 'completed');
    if (i + 1 < step) ind.classList.add('completed');
    if (i + 1 === step) ind.classList.add('active');
  });
  
  // Update panels
  document.querySelectorAll('.panel').forEach((panel, i) => {
    panel.classList.toggle('active', i + 1 === step);
  });
  
  // Update summary if on step 3
  if (step === 3) {
    updateSummary();
  }
}

function updateSummary() {
  const photoCount = uploadedPhotos.length;
  const videoCount = 3; // Always 3 formats: vertical, square, landscape
  
  document.getElementById('summaryPhotos').textContent = photoCount;
  document.getElementById('summaryVideos').textContent = videoCount;
  document.getElementById('summaryStyle').textContent = selectedStyle.charAt(0).toUpperCase() + selectedStyle.slice(1);
  
  document.getElementById('costVideos').textContent = videoCount;
  document.getElementById('costVideoCredits').textContent = '1 credit';
  document.getElementById('costTotal').textContent = '1 credit';
  document.getElementById('creditsRemaining').textContent = userCredits;
}

// â•â•â•â•â•â•â•â•â•â•â• API CONFIG â•â•â•â•â•â•â•â•â•â•â•
const API_BASE = 'https://api.listingenius.com';

// â•â•â•â•â•â•â•â•â•â•â• GENERATION â•â•â•â•â•â•â•â•â•â•â•
async function startGeneration() {
  if (userCredits < 1) {
    alert('You need more credits! Click "Buy Credits" to continue.');
    return;
  }
  
  goToStep(4); // Show progress panel
  
  // Get listing data including director's notes
  const listing = {
    address: document.getElementById('address').value || '123 Main Street',
    price: parseFloat(document.getElementById('price').value.replace(/[^0-9.]/g, '')) || 500000,
    bedrooms: parseInt(document.getElementById('bedrooms').value) || 4,
    bathrooms: parseFloat(document.getElementById('bathrooms').value) || 3,
    sqft: parseInt(document.getElementById('sqft').value) || null,
    property_type: document.getElementById('propertyType').value || 'Single Family Home',
    features: document.getElementById('features').value.split(',').map(f => f.trim()).filter(f => f),
    style: selectedStyle,
    director_notes: document.getElementById('directorNotes').value || null
  };
  
  try {
    document.getElementById('progressStatus').textContent = 'Connecting to AI...';
    document.getElementById('progressFill').style.width = '5%';
    
    // Call the API
    const response = await fetch(`${API_BASE}/api/demo/generate`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(listing)
    });
    
    if (!response.ok) {
      throw new Error(`API error: ${response.status}`);
    }
    
    const data = await response.json();
    
    // Animate progress
    const steps = [
      { text: 'AI analyzing property...', progress: 20 },
      { text: 'Generating description with Claude...', progress: 40 },
      { text: 'Creating social media posts...', progress: 60 },
      { text: 'Processing videos...', progress: 80 },
      { text: 'Finalizing your package...', progress: 100 },
    ];
    
    for (const step of steps) {
      document.getElementById('progressStatus').textContent = step.text;
      document.getElementById('progressFill').style.width = step.progress + '%';
      await new Promise(r => setTimeout(r, 500));
    }
    
    generatedResults = data;
    userCredits -= 1;
    document.getElementById('creditsCount').textContent = userCredits;
    
    showResults(data);
    goToStep(5);
    
  } catch (err) {
    console.error('Generation error:', err);
    alert('Error connecting to API. Please try again.\n\n' + err.message);
    goToStep(3); // Go back to generate step
  }
}

async function runDemoGeneration(listing) {
  const statuses = [
    { text: 'Uploading photos...', progress: 10 },
    { text: 'Analyzing images with AI...', progress: 25 },
    { text: 'Generating property description...', progress: 40 },
    { text: 'Creating social media posts...', progress: 55 },
    { text: 'Generating cinematic videos...', progress: 70 },
    { text: 'Rendering vertical format (TikTok/Reels)...', progress: 80 },
    { text: 'Rendering square format (Feed)...', progress: 88 },
    { text: 'Rendering landscape format (YouTube/MLS)...', progress: 95 },
    { text: 'Finalizing your package...', progress: 100 },
  ];
  
  for (let status of statuses) {
    document.getElementById('progressStatus').textContent = status.text;
    document.getElementById('progressFill').style.width = status.progress + '%';
    await new Promise(r => setTimeout(r, 800));
  }
  
  // Deduct credit
  userCredits -= 1;
  document.getElementById('creditsCount').textContent = userCredits;
  
  // Show results with demo data
  showResults(null);
  goToStep(5);
}

let generatedResults = null;

function showResults(apiData) {
  // Video results - check for real video URLs
  const formats = [
    { name: 'Vertical', platform: 'TikTok / Instagram Reels', class: '', key: 'vertical' },
    { name: 'Square', platform: 'Instagram Feed / Facebook', class: 'square', key: 'square' },
    { name: 'Landscape', platform: 'YouTube / MLS', class: 'landscape', key: 'landscape' },
  ];
  
  const videos = apiData?.videos || {};
  
  document.getElementById('videoResults').innerHTML = formats.map(f => {
    const videoData = videos[f.key];
    const hasVideo = videoData?.url || videoData?.status === 'completed';
    const videoUrl = videoData?.url;
    
    if (hasVideo && videoUrl) {
      // Real video available
      return `
        <div class="video-card">
          <div class="video-preview ${f.class}">
            <video controls style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
              <source src="${videoUrl}" type="video/mp4">
              Your browser does not support video.
            </video>
          </div>
          <div class="video-info">
            <div class="video-format">${f.name}</div>
            <div class="video-platform">${f.platform}</div>
            <div class="video-actions">
              <a href="${videoUrl}" download class="btn-download">Download</a>
              <button class="btn-copy" onclick="copyToClipboard('${videoUrl}')">Copy Link</button>
            </div>
          </div>
        </div>
      `;
    } else {
      // Placeholder/demo
      return `
        <div class="video-card">
          <div class="video-preview ${f.class}">
            <div style="color: var(--text-light-secondary); text-align: center;">
              <div style="font-size: 2rem; margin-bottom: 8px;">&#127916;</div>
              <div style="font-size: 0.75rem;">${videoData?.status === 'failed' ? 'Generation failed' : 'Video Preview'}</div>
            </div>
          </div>
          <div class="video-info">
            <div class="video-format">${f.name}</div>
            <div class="video-platform">${f.platform}</div>
            <div class="video-actions">
              <button class="btn-download" disabled style="opacity: 0.5;">Download</button>
              <button class="btn-copy" disabled style="opacity: 0.5;">Share</button>
            </div>
          </div>
        </div>
      `;
    }
  }).join('');
  
  // Description - use API data if available
  const address = document.getElementById('address').value || '742 Evergreen Terrace';
  const description = apiData?.description || `Welcome to your dream home at ${address}! This stunning ${selectedStyle} property offers the perfect blend of comfort and elegance.

Step inside to discover an open-concept living space bathed in natural light, featuring gleaming hardwood floors and designer finishes throughout. The gourmet kitchen boasts premium appliances, quartz countertops, and a spacious island perfect for entertaining.

The primary suite is a true retreat with a spa-inspired ensuite and walk-in closet. Additional bedrooms offer flexibility for family, guests, or home office space. Outside, enjoy resort-style living with a beautifully landscaped backyard.

Located in a sought-after neighborhood with top-rated schools, this home won't last long. Schedule your private showing today!`;
  
  document.getElementById('descriptionText').textContent = description;
  
  // Social posts - use API data if available
  const defaultPosts = {
    instagram: `JUST LISTED\n\n${address}\n\nDream home alert! This stunning property features...\n\nTap link in bio for details!\n\n#JustListed #RealEstate #DreamHome #HomeForSale`,
    facebook: `NEW LISTING ALERT!\n\n${address}\n\nI'm excited to present this beautiful home to the market! Features include...\n\nContact me today for a private showing!`,
    tiktok: `POV: You just found your dream home #realestate #housetour #dreamhome #justlisted`,
    twitter: `Just Listed: ${address}\n\nStunning home with amazing features!\n\nDM for details`,
    youtube: `${address} | Virtual Tour | ${document.getElementById('bedrooms').value || 4} BD / ${document.getElementById('bathrooms').value || 3} BA\n\nTake a virtual tour of this incredible property...`
  };
  
  const socialPosts = apiData?.social_posts || defaultPosts;
  
  const socialPlatforms = [
    { icon: '&#128247;', name: 'Instagram', key: 'instagram' },
    { icon: '&#128210;', name: 'Facebook', key: 'facebook' },
    { icon: '&#127925;', name: 'TikTok', key: 'tiktok' },
    { icon: '&#128038;', name: 'Twitter/X', key: 'twitter' },
    { icon: '&#9654;', name: 'YouTube', key: 'youtube' },
  ];
  
  document.getElementById('socialPosts').innerHTML = socialPlatforms.map(p => {
    const text = socialPosts[p.key] || defaultPosts[p.key];
    return `
    <div class="content-card">
      <div class="content-card-header">
        <span class="content-card-title">${p.icon} ${p.name}</span>
        <button class="btn-copy" onclick="copyToClipboard(\`${text.replace(/`/g, "'").replace(/\\/g, "\\\\")}\`)">Copy</button>
      </div>
      <p class="content-text">${text}</p>
    </div>
  `}).join('');
}

function copyToClipboard(text) {
  navigator.clipboard.writeText(text);
  alert('Copied to clipboard!');
}

function copyText(elementId) {
  const text = document.getElementById(elementId).textContent;
  navigator.clipboard.writeText(text);
  alert('Copied to clipboard!');
}

function startNewListing() {
  uploadedPhotos = [];
  renderPhotos();
  document.getElementById('address').value = '';
  document.getElementById('price').value = '';
  goToStep(1);
}

function downloadAll() {
  alert('Downloading all files... (In production, this would download a ZIP)');
}

function showBuyCredits() {
  alert('Opening payment modal... (Stripe integration)');
}
</script>

</body>
</html>
